{"version":3,"file":"js/32.8a8ada3a.js","mappings":"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","sources":["webpack://vue_waimai/./src/components/Header.vue","webpack://vue_waimai/./src/components/Header.vue?801b","webpack://vue_waimai/./src/views/createorder/index.vue","webpack://vue_waimai/./src/views/createorder/index.vue?8ca5"],"sourcesContent":["<template>\r\n  <div class=\"header\">\r\n    <van-icon name=\"arrow-left\" class=\"icon\" @click=\"toBack\"/>\r\n    <div>\r\n        {{title}}\r\n    </div>\r\n    <div class=\"edit\" v-if=\"edit\" @click=\"handleEdit\">\r\n        {{store.state.edit ? '编辑':'完成'}}\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Toast } from 'vant'\r\nimport {useRouter} from 'vue-router'\r\nimport { useStore } from 'vuex'\r\nexport default {\r\nprops:[\"title\",\"edit\"],\r\nsetup(){\r\n  const store = useStore()\r\n  const router = useRouter()\r\n  const toBack = () =>{\r\n    router.back()\r\n  }\r\n  const handleEdit  =()=>{\r\n    if(store.state.cartList.length){\r\n      store.commit('edit')\r\n      store.commit('ChangeDelete')\r\n    }else{\r\n    Toast.fail(\"商品空空如也\")\r\n    }\r\n  }\r\n  return{\r\n    toBack,\r\n    store,\r\n    handleEdit\r\n  }\r\n}\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.header {\r\n    background-color: #fff;\r\n    height: 40px;\r\n    font-size: 20px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    border-bottom: 1px solid #d7d7d7;\r\n    .edit {\r\n      font-size: 16px;\r\n      position: absolute;\r\n      right: 15px;\r\n      font-weight: normal;\r\n    }\r\n    .icon {\r\n      position: absolute;\r\n      left: 10px;\r\n    }\r\n  }\r\n</style>","import { render } from \"./Header.vue?vue&type=template&id=276e82aa&scoped=true\"\nimport script from \"./Header.vue?vue&type=script&lang=js\"\nexport * from \"./Header.vue?vue&type=script&lang=js\"\n\nimport \"./Header.vue?vue&type=style&index=0&id=276e82aa&lang=less&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-276e82aa\"]])\n\nexport default __exports__","<template>\r\n <div class=\"create-order\">\r\n   <Header title=\"生成订单\"/>\r\n   <van-contact-card type=\"edit\" :tel=\"tel\" :name=\"name\" @click=\"onEdit\" />\r\n   <div class=\"content\">\r\n    <div v-for=\"(item,index) in store.state.orderList\">\r\n        <van-card\r\n            :num=\"item.num\"\r\n            :price=\"item.price\"\r\n            :title=\"item.title\"\r\n            :thumb=\"item.pic\"\r\n            />\r\n    </div>\r\n   </div>\r\n   <div class=\"pay-wrap\">\r\n    <div class=\"price\">\r\n        <span>商品金额</span>\r\n        <span>￥{{totalPrice}}</span>\r\n    </div>\r\n      <van-button type=\"primary\" class=\"pay-btn\" color=\"#ffc400\" @click=\"handleCreateOrder\">生成订单</van-button>\r\n   </div>\r\n </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport Header from '@/components/Header.vue'\r\nimport { onMounted, reactive, toRefs } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { Dialog } from 'vant';\r\nimport { useRoute, useRouter } from 'vue-router';\r\n\r\nexport default {\r\ncomponents:{\r\nHeader,\r\n},\r\nsetup(){\r\n    const store = useStore()\r\n    const router = useRouter()\r\n    const route = useRoute()\r\n    const data = reactive({\r\n       tel:'13043012841',\r\n       name:'LYN',\r\n       totalPrice:0\r\n    })\r\n    const onEdit=()=>{\r\n       router.push('/address')\r\n    }\r\n    const initprice=()=>{\r\n        let price = 0\r\n        if(store.state.orderList.length){\r\n            store.state.orderList.forEach(item=>{\r\n                price+=item.num*item.price\r\n            })\r\n        }\r\n        data.totalPrice = price\r\n    }\r\n    const initUser=()=>{\r\n        store.state.userAddress.forEach(item=>{\r\n            if(item.isDefault){\r\n                data.name = item.name\r\n                data.tel = item.tel\r\n            }\r\n        })\r\n    }\r\n    const handleCreateOrder =()=>{\r\n       Dialog({\r\n            title: '提示',\r\n            message: '恭喜，您的订单已完成。',\r\n            }).then(() => {\r\n                let newList = store.state.cartList.filter(item=>{\r\n                      return !route.query.list.includes(item.id+\"\")\r\n                })\r\n                store.commit('delete',newList)\r\n                store.commit('orderListEd')\r\n                router.push('/order')\r\n            });\r\n    }\r\n    onMounted(()=>{\r\n        initprice(),\r\n        initUser()\r\n    })\r\n    return{\r\n        ...toRefs(data),\r\n        onEdit,\r\n        store,\r\n        handleCreateOrder\r\n    }\r\n}\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.create-order {\r\n  display: flex;\r\n  flex-flow: column;\r\n  height: 100%;\r\n  .content {\r\n    flex: 1;\r\n    overflow-y: auto;\r\n  }\r\n  .pay-wrap {\r\n    padding: 10px 0;\r\n    width: 100%;\r\n    background: #fff;\r\n    border-top: 1px solid #e9e9e9;\r\n    > div {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      padding: 0 5%;\r\n      margin: 10px 0;\r\n      font-size: 14px;\r\n      span:nth-child(2) {\r\n        color: red;\r\n        font-size: 18px;\r\n      }\r\n    }\r\n    .pay-btn {\r\n      width: 90%;\r\n      margin: 0 auto;\r\n    }\r\n  }\r\n}\r\n\r\n</style>","import { render } from \"./index.vue?vue&type=template&id=e743f88c&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=e743f88c&lang=less&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e743f88c\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_van_icon","name","onClick","$setup","toBack","_createElementVNode","_toDisplayString","$props","title","edit","key","_cache","args","handleEdit","store","state","_createCommentVNode","props","setup","useStore","router","useRouter","back","cartList","length","commit","Toast","fail","__exports__","render","_component_Header","_component_van_contact_card","type","tel","_ctx","onEdit","_hoisted_2","_Fragment","_renderList","orderList","item","index","_component_van_card","num","price","thumb","pic","_hoisted_3","_hoisted_4","_hoisted_5","totalPrice","_component_van_button","color","handleCreateOrder","default","_withCtx","_createTextVNode","_","components","Header","route","useRoute","data","reactive","push","initprice","forEach","initUser","userAddress","isDefault","Dialog","message","then","newList","filter","query","list","includes","id","onMounted","toRefs"],"sourceRoot":""}